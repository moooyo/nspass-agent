# NSPass Agent 配置文件示例
# 服务器ID - 在后端系统中注册的唯一标识符
server_id: "server-001"

# API 配置 - 与后端服务通信
api:
  base_url: "https://api.nspass.example.com"  # 后端API地址
  token: "your-api-token-here"                # API认证令牌
  timeout: 30                                 # 请求超时时间（秒）
  retry_count: 3                              # 重试次数
  retry_delay: 5                              # 重试间隔（秒）
  tls: true                                   # 是否启用TLS
  tls_skip_verify: false                      # 是否跳过TLS证书验证

# 代理配置
proxy:
  bin_path: "/usr/local/bin"                  # 代理软件安装路径
  config_path: "/etc/nspass/proxy"            # 代理配置文件路径
  enabled_types: 
    - "shadowsocks"                           # 支持的代理类型
    - "trojan"
    - "snell"
  auto_start: true                            # 是否自动启动代理服务
  restart_on_fail: true                       # 失败时是否重启

  # 进程监控配置
  monitor:
    enable: true                              # 是否启用进程监控
    check_interval: 30                        # 检查间隔（秒）
    restart_cooldown: 60                      # 重启冷却时间（秒）
    max_restarts: 10                          # 每小时最大重启次数
    health_timeout: 5                         # 健康检查超时（秒）

# iptables 配置
iptables:
  enable: true                                # 是否启用iptables管理
  chain_prefix: "NSPASS_"                     # 自定义链前缀
  backup_path: "/etc/nspass/iptables-backup" # 备份路径

# 日志配置
logger:
  level: "info"                               # 日志级别: debug, info, warn, error
  format: "json"                              # 日志格式: json, text
  output: "file"                              # 输出目标: stdout, file, both
  file: "/var/log/nspass/agent.log"          # 日志文件路径
  max_size: 100                               # 单个日志文件最大大小（MB）
  max_backups: 5                              # 保留的日志文件数量
  max_age: 30                                 # 日志文件保留天数

# 更新间隔（秒）- 从后端获取配置的频率
update_interval: 300 